"use strict";function replaceUrlParam(e,t,i){var n=new RegExp("("+t+"=).*?(&|$)"),r=e;return r=e.search(n)>=0?e.replace(n,"$1"+i+"$2"):r+(r.indexOf("?")>0?"&":"?")+t+"="+i}!function(e){e.fn.prepareTransition=function(){return this.each(function(){var t=e(this);t.one("TransitionEnd webkitTransitionEnd transitionend oTransitionEnd",function(){t.removeClass("is-transitioning")});var i=["transition-duration","-moz-transition-duration","-webkit-transition-duration","-o-transition-duration"],n=0;e.each(i,function(e,i){n=parseFloat(t.css(i))||n}),0!=n&&(t.addClass("is-transitioning"),t[0].offsetWidth)})}}(jQuery),window.timber=window.timber||{},timber.cacheSelectors=function(){timber.cache={$html:$("html"),$body:$("body"),$navigation:$("#accessibleNav"),$productImage:$("#productPhotoImg"),$thumbImages:$("#productThumbs").find("a.product-photo-thumb")}},timber.init=function(){timber.cacheSelectors(),timber.accessibleNav(),timber.productImageSwitch(),timber.responsiveVideos(),timber.drawersInit()},timber.Drawers=function(){var e=function(e,t,i){var n={close:".js-drawer-close",open:".js-drawer-open-"+t,openClass:"js-drawer-open __modal-open",dirOpenClass:"js-drawer-open-"+t};if(this.$nodes={parent:$("html"),page:$("#PageContainer"),moved:$(".is-moved-by-drawer")},this.config=$.extend(n,i),this.position=t,this.drawerSelector="#"+e,this.$drawer=$(this.drawerSelector),!this.$drawer.length)return!1;this.drawerIsOpen=!1,this.init()};return e.prototype.init=function(){$(this.config.open).on("click",$.proxy(this.open,this)),this.$drawer.on("click",this.config.close,$.proxy(this.close,this))},e.prototype.open=function(e){var t=!1;if(e?e.preventDefault():t=!0,e&&e.stopPropagation&&(e.stopPropagation(),this.$activeSource=$(e.currentTarget)),this.drawerIsOpen&&!t)return this.close();this.$nodes.moved.addClass("is-transitioning"),this.$drawer.prepareTransition(),this.$nodes.parent.addClass(this.config.openClass+" "+this.config.dirOpenClass),this.drawerIsOpen=!0,this.config.onDrawerOpen&&"function"==typeof this.config.onDrawerOpen&&(t||this.config.onDrawerOpen()),this.$activeSource&&this.$activeSource.attr("aria-expanded")&&this.$activeSource.attr("aria-expanded","true"),this.$nodes.page.on("touchmove.drawer",function(){return!1}),this.$nodes.page.on("click.drawer",$.proxy(function(){return this.close(),!1},this))},e.prototype.close=function(){this.drawerIsOpen&&($(document.activeElement).trigger("blur"),this.$nodes.moved.prepareTransition({disableExisting:!0}),this.$drawer.prepareTransition({disableExisting:!0}),this.$nodes.parent.removeClass(this.config.dirOpenClass+" "+this.config.openClass),this.drawerIsOpen=!1,this.$nodes.page.off(".drawer"))},e}(),timber.drawersInit=function(){timber.RightDrawer=new timber.Drawers("CartDrawer","right",{onDrawerOpen:ajaxCart.load})},timber.accessibleNav=function(){function e(e){var t=e.next("ul");hasSubMenu=!!t.hasClass("sub-nav"),isSubItem=$(".site-nav--dropdown").has(e).length,$newFocus=null,isSubItem?($newFocus=e.closest(".site-nav--has-dropdown").find("a"),n($newFocus)):(r(a),n(e))}function t(e){e.addClass(h),setTimeout(function(){timber.cache.$body.on("touchstart",function(){i(e)})},250)}function i(e){e.removeClass(h),timber.cache.$body.off("touchstart")}function n(e){e.addClass(u)}function r(e){e.removeClass(u)}var o=timber.cache.$navigation,s=o.find("a"),a=o.children("li").find("a"),c=o.find(".site-nav--has-dropdown"),d=o.find(".site-nav--dropdown").find("a"),h="nav-hover",u="nav-focus";c.on("mouseenter touchstart",function(e){var i=$(this);i.hasClass(h)||e.preventDefault(),t(i)}),c.on("mouseleave",function(){i($(this))}),d.on("touchstart",function(e){e.stopImmediatePropagation()}),s.focus(function(){e($(this))}),s.blur(function(){r(a)})},timber.productImageSwitch=function(){timber.cache.$thumbImages.length&&timber.cache.$thumbImages.on("click",function(e){e.preventDefault();var t=$(this).attr("href");timber.switchImage(t,null,timber.cache.$productImage)})},timber.switchImage=function(e,t,i){$(i).attr("src",e)},timber.responsiveVideos=function(){$('iframe[src*="youtube.com/embed"]').wrap('<div class="video-wrapper"></div>'),$('iframe[src*="player.vimeo"]').wrap('<div class="video-wrapper"></div>')},$(timber.init);