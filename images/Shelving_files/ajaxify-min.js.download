function attributeToString(t){return"string"!=typeof t&&"undefined"===(t+="")&&(t=""),jQuery.trim(t)}"undefined"==typeof ShopifyAPI&&(ShopifyAPI={}),ShopifyAPI.onCartUpdate=function(t){},ShopifyAPI.updateCartNote=function(t,a){var e={type:"POST",url:"/cart/update.js",data:"note="+attributeToString(t),dataType:"json",success:function(t){"function"==typeof a?a(t):ShopifyAPI.onCartUpdate(t)},error:function(t,a){ShopifyAPI.onError(t,a)}};jQuery.ajax(e)},ShopifyAPI.onError=function(XMLHttpRequest,textStatus){var data=eval("("+XMLHttpRequest.responseText+")");data.message&&alert(data.message+"("+data.status+"): "+data.description)},ShopifyAPI.addItemFromForm=function(t,a,e){var r={type:"POST",url:"/cart/add.js",data:jQuery(t).serialize(),dataType:"json",success:function(e){"function"==typeof a?a(e,t):ShopifyAPI.onItemAdded(e,t)},error:function(t,a){"function"==typeof e?e(t,a):ShopifyAPI.onError(t,a)}};jQuery.ajax(r)},ShopifyAPI.getCart=function(t){jQuery.getJSON("/cart.js",function(a,e){"function"==typeof t?t(a):ShopifyAPI.onCartUpdate(a)})},ShopifyAPI.changeItem=function(t,a,e){var r={type:"POST",url:"/cart/change.js",data:"quantity="+a+"&id="+t,dataType:"json",success:function(t){"function"==typeof e?e(t):ShopifyAPI.onCartUpdate(t)},error:function(t,a){ShopifyAPI.onError(t,a)}};jQuery.ajax(r)};var ajaxCart=function(module,$){"use strict";var init,loadCart,settings,$body,queue,$formContainer,$addToCart,$cartCountSelector,$cartCostSelector,$cartContainer,$drawerContainer,addItemsToTheCart,updateCountPrice,formOverride,itemAddedCallback,itemErrorCallback,cartUpdateCallback,buildCart,cartCallback,adjustCart,adjustCartCallback,createQtySelectors,qtySelectors,validateQty,updateQuantity;return init=function(t){settings={formSelector:'form[action^="/cart/add"]',cartContainer:"#CartContainer",addToCartSelector:'input[type="submit"]',cartCountSelector:null,cartCostSelector:null,moneyFormat:"$",disableAjaxCart:!1,enableQtySelectors:!0,removeCartItemSelector:".js-remove"},$.extend(settings,t),$formContainer=$(settings.formSelector),$cartContainer=$(settings.cartContainer),$addToCart=$formContainer.find(settings.addToCartSelector),$cartCountSelector=$(settings.cartCountSelector),$cartCostSelector=$(settings.cartCostSelector),queue=[],$body=jQuery("body"),settings.enableQtySelectors&&qtySelectors(),!settings.disableAjaxCart&&$addToCart.length&&formOverride(),adjustCart()},loadCart=function(){$body.addClass("drawer--is-loading"),ShopifyAPI.getCart(cartUpdateCallback)},updateCountPrice=function(t){jQuery(document).trigger("haus/updateCartCount",t.item_count),$cartCostSelector&&$cartCostSelector.html(t.total_price)},addItemsToTheCart=function(){queue.length?jQuery.ajax({url:"/cart/add",dataType:"json",data:queue.shift(),type:"post",success:addItemsToTheCart}):(console.log("All items added!"),itemAddedCallback())},formOverride=function(){$formContainer.on("submit",function(t){t.preventDefault();var a=!1;if(jQuery("#ProductComplexAddToCart").length){a=jQuery("#ProductComplexAddToCart").data("selectedItems");for(var e=0;e<a.length;e++)queue.push({id:a[e].id,quantity:a[e].cartQuantity});addItemsToTheCart()}else $addToCart.removeClass("is-added").addClass("is-adding"),$(".qty-error").remove(),ShopifyAPI.addItemFromForm(t.target,itemAddedCallback,itemErrorCallback)})},itemAddedCallback=function(t){$addToCart.removeClass("is-adding").addClass("is-added"),ShopifyAPI.getCart(cartUpdateCallback)},itemErrorCallback=function(XMLHttpRequest,textStatus){var data=eval("("+XMLHttpRequest.responseText+")");$addToCart.removeClass("is-adding is-added"),data.message&&422==data.status&&$formContainer.after('<div class="errors qty-error">'+data.description+"</div>")},cartUpdateCallback=function(t){jQuery(".nt-itemcount").html(t.item_count),updateCountPrice(t),buildCart(t)},buildCart=function(t){if($cartContainer.empty(),0===t.item_count)return $cartContainer.append('<div class="pdg"><p>'+HAUS.settings.cart_empty_message+'</p><a href="#Close" class="btn btn--full js-drawer-close">Continue shopping</a></div>'),void cartCallback(t);var a=[],e={},r={},n=$("#CartTemplate").html(),o=Handlebars.compile(n);$.each(t.items,function(t,r){var n=r.quantity+1,o=r.quantity-1,i=r.quantity;if(null!=r.image)d=r.image.replace(/(\.[^.]*)$/,"_compact$1").replace("http:","");else var d="//cdn.shopify.com/s/assets/admin/no-image-medium-cc9732cb976dd349a0df1d39816fbcc7.gif";var c=r.product_title,s=r.variant_title;"Default Title"==s&&(s=!1),e={id:r.variant_id,url:r.url,img:d,name:c,variation:s,itemAdd:n,itemMinus:o,itemQty:i,price:HAUS.currency.getPrice(r.price),vendor:r.vendor},a.push(e)}),r={items:a,note:t.note,totalPrice:HAUS.currency.getPrice(t.total_price)},$cartContainer.append(o(r)),cartCallback(t)},cartCallback=function(t){$body.removeClass("drawer--is-loading"),$body.trigger("ajaxCart.afterCartLoad",t)},adjustCart=function(){$body.on("click","#ShippingCalculatorTrigger",function(t){t.preventDefault(),$(this).toggleClass("s__active"),jQuery("#ShippingCalculatorForm").slideToggle()}),$body.on("click",".js-remove",function(t){var a=$(this).data("id");a&&updateQuantity(a,0),t.preventDefault()}),$body.on("click",".js-qty__adjust",function(){var t,a=$(this),e=a.data("id"),r=a.siblings(".js-qty__num, .ajaxcart__qty-num");console.log("Qty:",r.length),t=parseInt(r.val().replace(/\D/g,"")),t=validateQty(t),a.hasClass("js-qty__adjust--plus")?t+=1:(t-=1)<1&&(t=1),e?updateQuantity(e,t):r.val(t).trigger("change")}),$body.on("change",".ajaxcart__qty-num, .js-qty__num",function(){var t,a=$(this),e=a.data("id");t=parseInt(a.val().replace(/\D/g,"")),t=validateQty(t),e&&updateQuantity(e,t)}),$body.on("mouseenter",".js-qty",function(){jQuery(this).find("input").addClass("s__focus")}),$body.on("mouseleave",".js-qty",function(){jQuery(this).find("input").removeClass("s__focus")}),$body.on("focus",".ajaxcart__qty-adjust",function(){var t=$(this);setTimeout(function(){t.select()},50)}),$body.on("change",'textarea[name="note"]',function(){var t=$(this).val();ShopifyAPI.updateCartNote(t)})},updateQuantity=function(t,a){var e=$('.ajaxcart__row[data-id="'+t+'"]').addClass("is-loading");0===a&&e.parent().addClass("is-removed"),setTimeout(function(){ShopifyAPI.changeItem(t,a,adjustCartCallback)},250)},adjustCartCallback=function(t){updateCountPrice(t),setTimeout(function(){ShopifyAPI.getCart(buildCart)},150)},createQtySelectors=function(){$('input[type="number"]',$cartContainer).length&&$('input[type="number"]',$cartContainer).each(function(){var t=$(this),a=t.val(),e=a+1,r=a-1,n=a,o=$("#AjaxQty").html(),i=Handlebars.compile(o),d={id:t.data("id"),itemQty:n,itemAdd:e,itemMinus:r};t.after(i(d)).remove()}),$('a[href^="/cart/change"]',$cartContainer).length&&$('a[href^="/cart/change"]',$cartContainer).each(function(){$(this).addClass("ajaxcart__remove")})},qtySelectors=function(){var t=$('input[type="number"]');t.length&&t.each(function(){var t=$(this),a=t.val(),e=t.attr("name"),r=t.attr("id"),n=a+1,o=a-1,i=a,d=$("#JsQty").html(),c=Handlebars.compile(d),s={id:t.data("id"),itemQty:i,itemAdd:n,itemMinus:o,inputName:e,inputId:r};t.after(c(s)).remove()})},validateQty=function(t){return(parseFloat(t)!=parseInt(t)||isNaN(t))&&(t=1),t},module={init:init,load:loadCart}}(ajaxCart||{},jQuery);